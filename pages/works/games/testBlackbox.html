<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>MoreFun's Bolg</title>
		<link rel="stylesheet" type="text/css" href="../../../styles/index.css"/>
		<link rel="stylesheet" type="text/css" href="../../../styles/works.css"/>
		<style>
			#b_w_box{padding-top:50px;position:relative;}
			#wrap{ width:400px; height:400px; background:#eee; box-shadow:0 3px 7px #aaa; margin:30px auto; position:relative; overflow:hidden; }
			#content1 { width:100&; height:400px; position:relative; top:-100px; }
			.row { width:100%; height:100px;}
			.block { float:left; height:100px; width:100px; }
			.box { background:#000;}
			#score { text-align:center; }
			#retry{width:70px;height:30px;background:#ccc;position:absolute;left:320px;
			top:540px;border-radius:5px;display:none;}
		</style>
		<script src="../../../scripts/jquery-2.1.4.js"></script>
	</head>
	<body>
		<div id="header">
			<div id="list_parent">
				<div id="list_head" class="trans"></div>
				<div id="list_body">
					<ul>
						<li class="list_body_parent">
							<div class="list_body_head trans">简历</div>
						</li>
						<li class="list_body_parent">
							<div class="list_body_head trans">作品</div>
							<div class="list_body_body trans" id="works">
								<ul>
									<li><a href="#" class="trans">别踩白块</a></li>
									<li><a href="#" class="trans">2048</a></li>
									<li><a href="#" class="trans">轮播图</a></li>
								</ul>
							</div>
						</li>
						<li class="list_body_parent">
							<div class="list_body_head trans">IT技术</div>
							<div class="list_body_body trans" id="IT_technology">
								<ul>
									<li><a href="#" class="trans">HTML</a></li>
									<li><a href="#" class="trans">CSS</a></li>
									<li><a href="#" class="trans">JavaScript</a></li>
									<li><a href="#" class="trans">jQuery</a></li>
								</ul>
							</div>
						</li>
						<li class="list_body_parent">
							<div class="list_body_head trans">闲谈</div>
							<div class="list_body_body trans" id="something">
								<ul>
									<li><a/ href="#" class="trans">音乐</a></li>
									<li><a/ href="#" class="trans">电影</a></li>
									<li><a/ href="#" class="trans">书</a></li>
								</ul>
							</div>
						</li>
					</ul>
					<div id="list_body_info">
						<ul>
							<li><span class="tel left"></span><div>18004795058<br>18618370568</div></li>
							<li><span class="address left"></span><div>中国北京市某某区某某大街X号XXX</div></li>
							<li><span class="email left"></span><div>ximengsunyichen@sina.com<br>18004795058@163.com</div></li>
						</ul>
					</div>
				</div>
			</div>
			<div id="nav_head">
				<ul>
					<li><a href="http://www.syc1992.com/index" class="trans">首页</a></li>
					<li><a href="../../resume.html" class="trans">简历</a></li>
					<li>
					<a href="../../works.html" class="trans">作品</a>
					</li>
					<li><a href="../../IT_technology.html" class="trans">IT技术</a></li>
					<li><a href="../../something.html" class="trans">闲谈</a></li>
				</ul>
			</div>
			<div id="call_me">
				<ul>
					<li><a href="https://github.com/MoreFunGuy" id="github"></a></li>
					<li><a href="http://weibo.com/2658446207/profile?rightmod=1&wvr=6&mod=personinfo" id="weibo"></a></li>
				</ul>
			</div>
		</div>
		<div id="content">
			<div class="nav left">
				<ul>
					<li>
						<div class="nav_header">JS效果<span class="right"></span></div>
						<div class="nav_body">
							<ul>
								<li><a href="#">放大镜效果</a></li>
								<li><a href="#">轮播图</a></li>
								<li><a href="#">canvas画板</a></li>
							</ul>
						</div>
					</li>
					<li>
						<div class="nav_header">小游戏<span class="right"></span></div>
						<div class="nav_body">
							<ul>
								<li><a href="#">别踩白块</a></li>
								<li><a href="#">2048</a></li>
								<li><a href="#">俄罗斯方块</a></li>
							</ul>
						</div>
					</li>
					<li>
						<div class="nav_header">优秀神作<span class="right"></span></div>
						<div class="nav_body">
							<ul>
								<li><a href="../heart/index.html">Heart</a></li>
							</ul>
						</div>				
					</li>
					<li id="search"/><input type="text" placeholder="请输入搜索内容"  maxlength="20" class="words"><span></span></li>
				</ul>
			</div>
			<div class="wrap right">
				<div id="b_w_box">
					<h1 id="score">0</h1>
					<div id="wrap">
						<div id="content1"></div>
					</div>
					<button id="retry">重新开始</button>
				</div>
			</div>
		</div>
		<br><br>
		<script src="../../../scripts/index_another.js"></script>
		<script src="../../../scripts/works.js"></script>
		<script>
		window.onload = function (){
			var clock = null,
				num = 0,
				speed = 2,
				state = 0;

		//call cRow() function 
			function init(){
				for(var i=0; i<4; i++){
					cRow();
				};

				$('content1').onclick = function (ev){
					judge(ev);
				};
			};
			init();

		//judge lose
			function judge(ev){
				if(state == 1){
					alert('game over');
					return; // not return is continue follow statement
				};
				if(ev.target.className.indexOf('box') == -1){
					fail();
				}else{
					score();
					ev.target.className = 'block';
					ev.target.parentNode.mark = 1;
				};
			};

		//take id 
			function $(id){
				return document.getElementById(id);
			};

			//create div function
			function cDiv(className){
				var div = document.createElement('div');
				div.className = className;
				return div;
			};

		//create row include four block
			function cRow(){
				var con = $('content1');
				var oRow = cDiv('row');
				var classNa = cBox();
				for (var i=0; i<4; i++){
					oRow.appendChild(cDiv(classNa[i]));
				};

				if(con.firstChild == null){
					con.appendChild(oRow);
				}else{
					con.insertBefore(oRow,con.firstChild);
				};
			};
			
		// create random black box
			function cBox(){
				var arr = ['block','block','block','block'];
				var i = Math.floor(Math.random()*4);
				arr[i] = 'block box';
				return arr;
			};

		//move the box down
			function mDown(){
				var con = $('content1');
				var topValue = parseInt(window.getComputedStyle(con,null)['top']);
				if(speed + topValue > 0){
					topValue = 0;
				}else{
					topValue += speed;
				};
				con.style.top = topValue + 'px';

				if(topValue == 0){
					cRow();
					con.style.top = '-100px';
					remove();
				} else if( topValue == speed - 100 ){
					var rows = con.childNodes;  //con.children can also be, that not contain TextNode
					if( (rows.length == 5) && (rows[rows.length - 1].mark !== 1)){
					   fail();
					};
				};
			};

		//fail function
			function fail (){
				clearInterval(clock);
				alert('得分：' + num);
				state = 1;
				document.getElementById("retry").style.display = "block";
			};

		//remove con.lastChild
			function remove(){
				var con = $('content1');
				if(con.childNodes.length == 6){
					con.removeChild(con.lastChild);
				};
			};

		// set interval  
			function start(){
				clock = window.setInterval(mDown,20); // interval first argument is function declare
			};

		//score funciton
			function score (){
				var score = $('score');
				score.innerHTML = parseInt(score.innerHTML) + 1;
				num = parseInt(score.innerHTML) ;
				if( num % 7 == 0){
					speedUp();
				};
			};

		//speedUp function
			function speedUp(){
				speed += 2;
				if( speed == 20 ){
					alert('diaobaole');
				};
			};

		//start switch
			start();

		};
		document.getElementById("retry").onclick = function(){
			location.reload();
		}
		</script>
	</body>
</html>